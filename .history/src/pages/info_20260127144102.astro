---
import Layout from '../layouts/Layout.astro';
import { supabase } from '../lib/supabase';

// 1. Fetch dữ liệu Profile từ Server
const { data: profile } = await supabase.from('profile').select('*').single();

// Fallback nếu chưa có dữ liệu (tránh lỗi)
const info = profile || {
    name: 'NAME NOT SET',
    title: 'TITLE NOT SET',
    skills: 'SKILLS NOT SET',
    description: 'No description available',
    bio_img: 'https://placehold.co/600x800/black/white?text=NO+IMAGE'
};
---

<Layout title={`MINOX | ABOUT`}>
    <div class="w-full min-h-[80vh] flex items-center justify-center bg-[#f3f2ef] py-20 px-4">
        
        {/* CARD PROFILE */}
        <div class="w-[500px] h-[600px] bg-black relative overflow-hidden group flex flex-col items-center justify-center text-center border border-black shadow-2xl">
             
             {/* Ảnh nền Bio */}
             <img 
                src={info.bio_img} 
                alt={info.name}
                class="absolute inset-0 w-full h-full object-cover opacity-60 group-hover:opacity-40 transition-all duration-700 grayscale"
             />
             
             {/* Nội dung đè lên */}
             <div class="relative z-10 p-10 border-4 border-white m-4 bg-black/20 backdrop-blur-sm group-hover:bg-black/40 transition-colors">
                 <h2 class="text-white font-vibe text-5xl md:text-6xl font-bold tracking-tighter leading-none mb-2 uppercase">
                    MY SKILLSET
                 </h2>
                 <p class="text-white font-vibe text-lg md:text-xl mt-4 tracking-widest uppercase">
                    {info.skills}
                 </p>
                 
                 <div class="mt-8 pt-8 border-t border-white/30">
                    <p class="text-gray-300 font-vibe text-sm uppercase tracking-wider font-bold">
                        {info.name}
                    </p>
                    <p class="text-gray-400 font-vibe text-xs mt-1 uppercase">
                        {info.title}
                    </p>
                    <p class="text-gray-500 font-vibe text-[10px] mt-4 uppercase max-w-[200px] mx-auto leading-relaxed">
                        {info.description}
                    </p>
                 </div>
             </div>
        </div>

    </div>
</Layout>